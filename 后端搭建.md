## 1. 创建项目

### 1.打开 IDEA 创建项目

1. 打开 IDEA -> File -> New -> Project
2. 选择 Spring Initializr
3. 选择 JDK 17
4. 选择 Maven 构建工具
5. 选择打包方式为 Jar

### 2.填写项目基本信息

```
Group: com.taotu
Artifact: hv
Name: taotu
Description: TaoTu Service
Package name: com.taotucom.taotu.hv
Packaging: Jar
Java version: 17
Spring Boot: 3.3.5
```

### 3.选择项目依赖

1. Spring Web: Web应用开发基础依赖
2. MySQL Driver: MySQL数据库驱动
3. Lombok: 简化Java代码的工具
4. Validation: 参数校验
5. Spring Configuration Processor: 配置文件处理器

### 4. 项目插件工具依赖添加

在pom.xml的<dependencys></dependencys>标签中添加以下依赖:

```java
<!-- MyBatis Plus -->
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>${mybatis-plus.version}</version>
</dependency>

<!-- Hutool工具包 -->
<dependency>
    <groupId>cn.hutool</groupId>
    <artifactId>hutool-all</artifactId>
    <version>${hutool.version}</version>
</dependency>

<!-- Swagger文档 -->
<dependency>
    <groupId>io.springfox</groupId>
    <artifactId>springfox-boot-starter</artifactId>
    <version>3.0.0</version>
</dependency>

<!-- Knife4j增强文档 -->
<dependency>
    <groupId>com.github.xiaoymin</groupId>
    <artifactId>knife4j-spring-boot-starter</artifactId>
    <version>3.0.3</version>
</dependency>
```

### 5.修改application.properties文件内容

```java
# 应用程序名称
spring.application.name=taotu
# 服务器端口，应用将运行在此端口上
server.port=8099 
spring.datasource.url=jdbc:mysql://localhost:3306/taotu_db?serverTimezone=UTC  # 数据库连接 URL，指定数据库地址和时区
spring.datasource.username=root                        # 数据库用户名，用于连接数据库
spring.datasource.password=root                        # 数据库密码，用于连接数据库
# 数据库驱动类名，指定使用的数据库驱动
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
# 显示 SQL 语句在控制台
spring.jpa.show-sql=true
# 格式化输出的 SQL 语句
spring.jpa.properties.hibernate.format_sql=true
# 自动更新数据库表结构
spring.jpa.hibernate.ddl-auto=update
```

### 6.尝试通过mvn clean install命令构建项目

`mvn clean install` 是一个 Maven 命令，主要用于构建和管理 Java 项目。这个命令由两个部分组成：`clean` 和 `install`。下面是它们各自的作用：

#### 1. clean
- **作用**：删除项目的 `target` 目录。
- **目的**：确保在构建项目之前，清除之前构建的所有文件和输出。这有助于避免由于旧文件或不一致的状态导致的构建问题。

#### 2. install
- **作用**：编译项目的源代码，运行测试，并将构建的 JAR 或 WAR 文件安装到本地 Maven 仓库。
- **目的**：使得其他 Maven 项目可以依赖于这个项目的构建结果。安装后，其他项目可以通过 Maven 的依赖管理机制引用这个项目。

总结

执行 `mvn clean install` 命令的整体流程如下：
1. 清理项目，删除旧的构建文件。
2. 编译源代码。
3. 运行单元测试（如果有的话）。
4. 将构建的产物（如 JAR 或 WAR 文件）安装到本地 Maven 仓库。

这个命令通常用于确保项目的构建是干净的，并且可以在本地环境中使用。

## 2. 项目结构

### 1.项目文件目录结构概要:

```
src/main/java/com/taotu/news/
├── common/                 # 公共组件
│   ├── config/            # 配置类
│   ├── exception/         # 异常处理
│   └── result/            # 统一返回
├── controller/            # 控制器层
├── service/              # 服务层
│   └── impl/            # 服务实现类
├── mapper/              # 数据访问层
└── model/               # 数据模型
    ├── entity/         # 实体类
    ├── dto/            # 数据传输对象 
    ├── vo/             # 视图对象
    └── param/          # 查询参数对象
```

### 2.详细文件目录结构:

```
src/main/java/com/taotu/news/
├── common/                    # 公共组件
│   ├── config/               # 配置类
│   │   ├── MybatisPlusConfig.java
│   │   ├── SwaggerConfig.java
│   │   └── WebMvcConfig.java
│   ├── exception/            # 异常处理
│   │   ├── BusinessException.java
│   │   └── GlobalExceptionHandler.java
│   └── result/               # 统一返回
│       ├── ApiResponse.java
│       ├── PageResult.java
│       └── ResultCode.java
├── controller/               # 控制器层
│   ├── NewsController.java
│   ├── JobController.java    # 新增
│   └── ProductController.java # 新增
├── service/                  # 服务层
│   ├── NewsService.java
│   ├── JobService.java       # 新增
│   ├── ProductService.java   # 新增
│   └── impl/
│       ├── NewsServiceImpl.java
│       ├── JobServiceImpl.java    # 新增
│       └── ProductServiceImpl.java # 新增
├── mapper/                   # 数据访问层
│   ├── NewsMapper.java
│   ├── JobMapper.java        # 新增
│   ├── JobTypeMapper.java    # 新增
│   ├── ProductMapper.java    # 新增
│   └── ProductCategoryMapper.java # 新增
└── model/                    # 数据模型
    ├── entity/              # 实体类
    │   ├── News.java
    │   ├── Job.java         # 新增
    │   ├── JobType.java     # 新增
    │   ├── Product.java     # 新增
    │   └── ProductCategory.java # 新增
    ├── dto/                 # 数据传输对象
    │   ├── NewsDTO.java
    │   ├── JobDTO.java      # 新增
    │   └── ProductDTO.java  # 新增
    ├── vo/                  # 视图对象
    │   ├── NewsVO.java
    │   ├── JobVO.java       # 新增
    │   └── ProductVO.java   # 新增
    └── param/               # 请求参数
        ├── NewsQueryParam.java
        ├── JobQueryParam.java    # 新增
        └── ProductQueryParam.java # 新增
```

## 3. 核心代码实现

### 4.1 配置文件

在application.yml中添加基础配置:

```
# 服务器配置
server:
  port: 8080  # 服务端口
  servlet:
    context-path: /api  # 接口统一前缀

# Spring相关配置
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver  # MySQL驱动类
    url: jdbc:mysql://localhost:3306/taotu_news?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai  # 数据库连接URL
    username: root  # 数据库用户名
    password: 123456  # 数据库密码
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss  # 日期格式化
    time-zone: GMT+8  # 时区设置
    
# MyBatis Plus配置
mybatis-plus:
  mapper-locations: classpath:mapper/*.xml  # Mapper XML文件位置
  type-aliases-package: com.taotu.news.model.entity  # 实体类包路径
  configuration:
    map-underscore-to-camel-case: true  # 开启驼峰命名转换
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  # SQL日志输出
  global-config:
    db-config:
      logic-delete-field: isDeleted  # 逻辑删除字段
      logic-delete-value: 1  # 删除值
      logic-not-delete-value: 0  # 未删除值
```

### 4.2 Common（公共类）

#### 4.2.1 Config（配置类）

MybatisPlusConfig.java:

1. 配置 MyBatis Plus 的分页插件
2. 设置 Mapper 扫描路径
3. 启用事务管理
4. 配置分页参数

```
// common/config/MybatisPlusConfig.java
package com.taotu.news.common.config;

import com.baomidou.mybatisplus.annotation.DbType;
import com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;
import com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;
import org.mybatis.spring.annotation.MapperScan;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.transaction.annotation.EnableTransactionManagement;

/**
 * MyBatis Plus 配置类
 * 
 * @author taotu
 * @version 1.0
 * @date 2024/03/15
 */
@Configuration
@EnableTransactionManagement
@MapperScan("com.taotu.news.mapper")
public class MybatisPlusConfig {

    /**
     * 配置 MyBatis Plus 插件
     * 
     * @return MybatisPlusInterceptor 插件对象
     */
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        
        // 添加分页插件
        PaginationInnerInterceptor paginationInterceptor = new PaginationInnerInterceptor(DbType.MYSQL);
        // 设置最大单页限制数量，默认 500 条，-1 不受限制
        paginationInterceptor.setMaxLimit(1000L);
        // 设置请求的页面大于最大页后操作，true调回到首页，false继续请求（默认false）
        paginationInterceptor.setOverflow(false);
        
        interceptor.addInnerInterceptor(paginationInterceptor);
        return interceptor;
    }
}
```

WebMvcConfig.java:

1. 配置跨域请求处理
2. 配置静态资源映射
3. 配置 Swagger 文档
4. 配置文件上传路径

```
// common/config/WebMvcConfig.java
package com.taotu.news.common.config;

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.CorsRegistry;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

/**
 * Web MVC 配置类
 * 
 * @author taotu
 * @version 1.0
 * @date 2024/03/15
 */
@Configuration
public class WebMvcConfig implements WebMvcConfigurer {

    /**
     * 配置跨域请求
     * 
     * @param registry CORS注册对象
     */
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")  // 所有接口
                .allowedOriginPatterns("*")  // 允许所有来源
                .allowedMethods("GET", "POST", "PUT", "DELETE", "OPTIONS")  // 允许的请求方法
                .allowedHeaders("*")  // 允许所有请求头
                .allowCredentials(true)  // 允许发送cookie
                .maxAge(3600L);  // 预检请求的有效期，单位为秒
    }

    /**
     * 配置静态资源映射
     * 
     * @param registry 资源处理器注册对象
     */
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        // 配置swagger-ui映射
        registry.addResourceHandler("/swagger-ui/**")
                .addResourceLocations("classpath:/META-INF/resources/webjars/springfox-swagger-ui/");
        
        // 配置knife4j映射
        registry.addResourceHandler("doc.html")
                .addResourceLocations("classpath:/META-INF/resources/");
        
        // 配置上传文件访问映射
        registry.addResourceHandler("/uploads/**")
                .addResourceLocations("file:uploads/");
    }
}
```

SwaggerConfig.java:

1.自动生成API文档

- 根据代码自动生成接口文档
- 无需手动编写文档，减少维护成本
- 文档实时更新，始终与代码保持同步

2.提供接口测试功能

- 可以直接在页面上测试接口
- 支持参数输入和验证
- 显示请求和响应示例

3.规范接口文档格式

- 统一的文档展示风格
- 标准的接口描述方式
- 清晰的参数说明

```java
package com.taotu.news.common.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import springfox.documentation.builders.ApiInfoBuilder;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.service.ApiInfo;
import springfox.documentation.service.Contact;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spring.web.plugins.Docket;

/**
 * Swagger API文档配置类
 * 用于生成RESTful API文档，方便前后端联调和接口测试
 *
 * @author taotu
 * @version 1.0
 * @date 2024/03/15
 */
@Configuration
public class SwaggerConfig {
    
    /**
     * 创建API文档配置
     *
     * @return Docket对象
     */
    @Bean
    public Docket createRestApi() {
        return new Docket(DocumentationType.OAS_30)  // 使用OpenAPI 3.0规范
                .apiInfo(apiInfo())  // 设置API文档信息
                .select()  // 开始选择API路径和处理器
                .apis(RequestHandlerSelectors.basePackage("com.taotu.news.controller"))  // 设置要生成文档的控制器包路径
                .paths(PathSelectors.any())  // 设置要生成文档的API路径，any表示所有
                .build();  // 构建Docket对象
    }

    /**
     * 创建API基本信息
     *
     * @return API信息对象
     */
    private ApiInfo apiInfo() {
        return new ApiInfoBuilder()
                .title("陶图新闻 API 文档")  // 文档标题
                .description("陶图新闻系统接口文档，包含所有接口说明")  // 文档描述
                .contact(new Contact(
                    "taotu",  // 联系人
                    "http://www.taotu.com",  // 网站
                    "contact@taotu.com"  // 邮箱
                ))
                .version("1.0")  // API版本号
                .build();
    }
}
```



#### 4.2.2 Exception（异常处理）

```
// common/exception/BusinessException.java
package com.taotu.news.common.exception;

import com.taotu.news.common.result.ResultCode;
import lombok.Getter;

@Getter
public class BusinessException extends RuntimeException {
    private final ResultCode resultCode;

    public BusinessException(ResultCode resultCode) {
        super(resultCode.getMessage());
        this.resultCode = resultCode;
    }

    public BusinessException(ResultCode resultCode, String message) {
        super(message);
        this.resultCode = resultCode;
    }
}
```

```
// common/exception/GlobalExceptionHandler.java
package com.taotu.news.common.exception;

import com.taotu.news.common.result.ApiResponse;
import com.taotu.news.common.result.ResultCode;
import lombok.extern.slf4j.Slf4j;
import org.springframework.validation.BindException;
import org.springframework.web.bind.MethodArgumentNotValidException;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;

@Slf4j
@RestControllerAdvice
public class GlobalExceptionHandler {
    @ExceptionHandler(BusinessException.class)
    public ApiResponse<?> handleBusinessException(BusinessException e) {
        log.error("业务异常：{}", e.getMessage());
        return ApiResponse.error(e.getResultCode());
    }

    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ApiResponse<?> handleValidException(MethodArgumentNotValidException e) {
        String message = e.getBindingResult().getFieldError().getDefaultMessage();
        log.error("参数校验异常：{}", message);
        return ApiResponse.error(ResultCode.PARAM_ERROR.getCode(), message);
    }

    @ExceptionHandler(BindException.class)
    public ApiResponse<?> handleBindException(BindException e) {
        String message = e.getBindingResult().getFieldError().getDefaultMessage();
        log.error("参数绑定异常：{}", message);
        return ApiResponse.error(ResultCode.PARAM_ERROR.getCode(), message);
    }

    @ExceptionHandler(Exception.class)
    public ApiResponse<?> handleException(Exception e) {
        log.error("系统异常", e);
        return ApiResponse.error(ResultCode.SYSTEM_ERROR);
    }
}
```

#### 4.2 Result（统一返回）

首先在 common/result 目录下创建以下文件：

```
// ResultCode.java
package com.taotu.news.common.result;

import lombok.AllArgsConstructor;
import lombok.Getter;

@Getter
@AllArgsConstructor
public enum ResultCode {
    SUCCESS(200, "操作成功"),
    PARAM_ERROR(400, "参数错误"),
    UNAUTHORIZED(401, "未授权"),
    FORBIDDEN(403, "无权限访问"),
    NOT_FOUND(404, "资源不存在"),
    SYSTEM_ERROR(500, "系统错误");

    private final Integer code;
    private final String message;
}
```

```
// ApiResponse.java
package com.taotu.news.common.result;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class ApiResponse<T> {
    private Integer code;
    private String message;
    private T data;

    public static <T> ApiResponse<T> success(T data) {
        return new ApiResponse<>(ResultCode.SUCCESS.getCode(), 
                               ResultCode.SUCCESS.getMessage(), 
                               data);
    }

    public static <T> ApiResponse<T> error(ResultCode resultCode) {
        return new ApiResponse<>(resultCode.getCode(), 
                               resultCode.getMessage(), 
                               null);
    }

    public static <T> ApiResponse<T> error(Integer code, String message) {
        return new ApiResponse<>(code, message, null);
    }
}
```

```
// PageResult.java
package com.taotu.news.common.result;

import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import lombok.Data;

import java.util.List;

@Data
public class PageResult<T> {
    private List<T> list;
    private Long total;
    private Long page;
    private Long pageSize;

    public static <T> PageResult<T> build(Page<T> page) {
        PageResult<T> result = new PageResult<>();
        result.setList(page.getRecords());
        result.setTotal(page.getTotal());
        result.setPage(page.getCurrent());
        result.setPageSize(page.getSize());
        return result;
    }
}
```

### 4.3 Model（数据模型）

##### entity（实体类）

###### 1. Job.java

```
// model/entity/Job.java
package com.taotu.news.model.entity;

import com.baomidou.mybatisplus.annotation.*;
import lombok.Data;
import java.time.LocalDateTime;

@Data
@TableName("t_job")
public class Job {
    @TableId(type = IdType.AUTO)
    private Long id;
    private Long typeId;
    private String title;
    private String department;
    private String location;
    private String salaryRange;
    private String experience;
    private String education;
    private String description;
    private String requirements;
    private String benefits;
    private Integer status;
    
    @TableField(exist = false)
    private String typeName;
    
    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createTime;
    
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updateTime;
    
    @TableLogic
    private Boolean isDeleted;
}
```

###### 2.  JobType.java

```
// model/entity/JobType.java
package com.taotu.news.model.entity;

import com.baomidou.mybatisplus.annotation.*;
import lombok.Data;
import java.time.LocalDateTime;

@Data
@TableName("t_job_type")
public class JobType {
    @TableId(type = IdType.AUTO)
    private Long id;
    private String name;
    
    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createTime;
    
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updateTime;
    
    @TableLogic
    private Boolean isDeleted;
}
```

###### 3. Product.java

```
// model/entity/Product.java
package com.taotu.news.model.entity;

import com.baomidou.mybatisplus.annotation.*;
import lombok.Data;
import java.time.LocalDateTime;
import java.util.List;
import java.util.Map;

@Data
@TableName("t_product")
public class Product {
    @TableId(type = IdType.AUTO)
    private Long id;
    private Long categoryId;
    private String name;
    private String model;
    private String description;
    private String features;
    private String specifications;
    
    @TableField(typeHandler = JacksonTypeHandler.class)
    private Map<String, Object> parameters;
    
    @TableField(typeHandler = JacksonTypeHandler.class)
    private List<String> imageUrls;
    
    private String videoUrl;
    private Integer sortOrder;
    private Integer status;
    
    @TableField(exist = false)
    private String categoryName;
    
    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createTime;
    
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updateTime;
    
    @TableLogic
    private Boolean isDeleted;
}
```

###### 4. ProductCategory.java

```
// model/entity/ProductCategory.java
package com.taotu.news.model.entity;

import com.baomidou.mybatisplus.annotation.*;
import lombok.Data;
import java.time.LocalDateTime;
import java.util.List;

@Data
@TableName("t_product_category")
public class ProductCategory {
    @TableId(type = IdType.AUTO)
    private Long id;
    private String name;
    private Long parentId;
    private Integer level;
    private Integer sortOrder;
    
    @TableField(exist = false)
    private List<ProductCategory> children;
    
    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createTime;
    
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updateTime;
    
    @TableLogic
    private Boolean isDeleted;
}
```

###### 5. News.java

```
// model/entity/News.java
package com.taotu.news.model.entity;

import com.baomidou.mybatisplus.annotation.*;
import jakarta.validation.constraints.NotBlank;
import lombok.Data;

import java.time.LocalDate;
import java.time.LocalDateTime;

@Data
@TableName("t_news")
public class News {
    @TableId(type = IdType.AUTO)
    private Long id;

    @NotBlank(message = "标题不能为空")
    private String title;

    @NotBlank(message = "分类不能为空")
    private String category;

    private String summary;
    private String content;
    private String imageUrl;
    private LocalDate publishDate;

    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createTime;

    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updateTime;

    @TableLogic
    private Boolean isDeleted;
}
```

##### dto（数据传输对象）

###### 1. NewsDTO.java

```
// model/dto/NewsDTO.java
package com.taotu.news.model.dto;

import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.NotNull;
import lombok.Data;
import org.springframework.format.annotation.DateTimeFormat;

import java.time.LocalDate;

@Data
public class NewsDTO {
    private Long id;

    @NotBlank(message = "新闻标题不能为空")
    private String title;

    @NotBlank(message = "新闻分类不能为空")
    private String category;

    private String summary;

    @NotBlank(message = "新闻内容不能为空")
    private String content;

    private String imageUrl;

    @NotNull(message = "发布日期不能为空")
    @DateTimeFormat(pattern = "yyyy-MM-dd")
    private LocalDate publishDate;
}
```

###### 2. JobDTO.java

```
// model/dto/JobDTO.java
package com.taotu.news.model.dto;

import lombok.Data;
import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.NotNull;

@Data
public class JobDTO {
    @NotNull(message = "职位类型不能为空")
    private Long typeId;
    
    @NotBlank(message = "职位名称不能为空")
    private String title;
    
    @NotBlank(message = "所属部门不能为空")
    private String department;
    
    @NotBlank(message = "工作地点不能为空")
    private String location;
    
    private String salaryRange;
    private String experience;
    private String education;
    private String description;
    private String requirements;
    private String benefits;
    private Integer status;
}
```

###### 3. ProductDTO.java

```
// model/dto/ProductDTO.java
package com.taotu.news.model.dto;

import lombok.Data;
import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.NotNull;
import java.util.List;
import java.util.Map;

@Data
public class ProductDTO {
    @NotNull(message = "产品分类不能为空")
    private Long categoryId;
    
    @NotBlank(message = "产品名称不能为空")
    private String name;
    
    private String model;
    private String description;
    private String features;
    private String specifications;
    private Map<String, Object> parameters;
    private List<String> imageUrls;
    private String videoUrl;
    private Integer sortOrder;
    private Integer status;
}
```

##### vo(视图对象)

###### 1. NewsVO.java

```
// model/vo/NewsVO.java
package com.taotu.news.model.vo;

import lombok.Data;
import java.time.LocalDate;

@Data
public class NewsVO {
    private Long id;
    private String title;
    private String category;
    private String summary;
    private String imageUrl;
    private LocalDate publishDate;
    private String link;
}
```

###### 2. JobVO.java

```
package com.taotu.news.model.vo;

import lombok.Data;
import java.time.LocalDateTime;

@Data
public class JobVO {
    private Long id;
    private Long typeId;
    private String typeName;
    private String title;
    private String department;
    private String location;
    private String salaryRange;
    private String experience;
    private String education;
    private String description;
    private String requirements;
    private String benefits;
    private Integer status;
    private LocalDateTime createTime;
}
```

###### 3. ProductVO.java

```
package com.taotu.news.model.vo;

import lombok.Data;
import java.time.LocalDateTime;
import java.util.List;
import java.util.Map;

@Data
public class ProductVO {
    private Long id;
    private Long categoryId;
    private String categoryName;
    private String name;
    private String model;
    private String description;
    private String features;
    private String specifications;
    private Map<String, Object> parameters;
    private List<String> imageUrls;
    private String videoUrl;
    private Integer sortOrder;
    private Integer status;
    private LocalDateTime createTime;
}
```

##### param (请求参数)

###### 1. NewsQueryParam.java

```
// model/param/NewsQueryParam.java
package com.taotu.news.model.param;

import jakarta.validation.constraints.Min;
import lombok.Data;
import org.springframework.format.annotation.DateTimeFormat;

import java.time.LocalDate;

@Data
public class NewsQueryParam {
    @Min(value = 1, message = "页码必须大于0")
    private Long page = 1L;
    
    @Min(value = 1, message = "每页条数必须大于0")
    private Long pageSize = 10L;
    
    private String category;
    private String keyword;
    
    @DateTimeFormat(pattern = "yyyy-MM-dd")
    private LocalDate startDate;
    
    @DateTimeFormat(pattern = "yyyy-MM-dd")
    private LocalDate endDate;
}
```

###### 2. JobQueryParam.java

```
package com.taotu.news.model.param;

import jakarta.validation.constraints.Min;
import lombok.Data;

@Data
public class JobQueryParam {
    @Min(value = 1, message = "页码必须大于0")
    private Long page = 1L;
    
    @Min(value = 1, message = "每页条数必须大于0")
    private Long pageSize = 10L;
    
    private Long typeId;  // 职位类型ID(1:社会招聘 2:校园招聘)
    private String keyword; // 关键词搜索(职位名称)
    private String department; // 部门筛选
    private String location; // 地点筛选
    private String experience; // 经验要求
    private String education; // 学历要求
}
```

###### 3. ProductQueryParam.java

```
package com.taotu.news.model.param;

import jakarta.validation.constraints.Min;
import lombok.Data;

@Data
public class ProductQueryParam {
    @Min(value = 1, message = "页码必须大于0")
    private Long page = 1L;
    
    @Min(value = 1, message = "每页条数必须大于0")
    private Long pageSize = 10L;
    
    private Long categoryId;  // 产品分类ID
    private String keyword;   // 关键词搜索(产品名称)
    private String model;     // 产品型号
    private Integer status;   // 产品状态(0:下架 1:上架)
}
```

### 4.4 Controller（控制器层）

###### 1. NewsController.java

```Java
// controller/NewsController.java
package com.taotu.news.controller;

import com.taotu.news.common.result.ApiResponse;
import com.taotu.news.common.result.PageResult;
import com.taotu.news.model.param.NewsQueryParam;
import com.taotu.news.model.vo.NewsVO;
import com.taotu.news.service.NewsService;
import jakarta.validation.Valid;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@Slf4j
@RestController
@RequestMapping("/news")
@Validated
public class NewsController {
    @Autowired
    private NewsService newsService;

    @GetMapping("/list")
    public ApiResponse<PageResult<NewsVO>> getNewsList(@Valid NewsQueryParam param) {
        log.info("获取新闻列表，参数：{}", param);
        return ApiResponse.success(newsService.getNewsList(param));
    }

    @GetMapping("/categories")
    public ApiResponse<List<String>> getCategories() {
        return ApiResponse.success(newsService.getCategories());
    }

    @GetMapping("/{id}")
    public ApiResponse<NewsVO> getNewsDetail(@PathVariable Long id) {
        return ApiResponse.success(newsService.getNewsDetail(id));
    }
    
    @PostMapping
    public ApiResponse<Long> createNews(@RequestBody @Valid NewsDTO newsDTO) {
        return ApiResponse.success(newsService.createNews(newsDTO));
    }

    @PutMapping("/{id}")
    public ApiResponse<Void> updateNews(@PathVariable Long id, 
                                      @RequestBody @Valid NewsDTO newsDTO) {
        newsService.updateNews(id, newsDTO);
        return ApiResponse.success(null);
    }

    @DeleteMapping("/{id}")
    public ApiResponse<Void> deleteNews(@PathVariable Long id) {
        newsService.deleteNews(id);
        return ApiResponse.success(null);
    }
}
```

###### 2. JobController.java

```java
package com.taotu.news.controller;

import com.taotu.news.common.result.ApiResponse;
import com.taotu.news.common.result.PageResult;
import com.taotu.news.model.dto.JobDTO;
import com.taotu.news.model.entity.JobType;
import com.taotu.news.model.param.JobQueryParam;
import com.taotu.news.model.vo.JobVO;
import com.taotu.news.service.JobService;
import jakarta.validation.Valid;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@Slf4j
@RestController
@RequestMapping("/jobs")
@Validated
public class JobController {
    @Autowired
    private JobService jobService;

    @GetMapping("/types")
    public ApiResponse<List<JobType>> getJobTypes() {
        return ApiResponse.success(jobService.getJobTypes());
    }

    @GetMapping("/list")
    public ApiResponse<PageResult<JobVO>> getJobList(@Valid JobQueryParam param) {
        return ApiResponse.success(jobService.getJobList(param));
    }
    
    @GetMapping("/social")
    public ApiResponse<PageResult<JobVO>> getSocialJobs(@Valid JobQueryParam param) {
        param.setTypeId(1L);  // 社会招聘
        return ApiResponse.success(jobService.getJobList(param));
    }
    
    @GetMapping("/campus")
    public ApiResponse<PageResult<JobVO>> getCampusJobs(@Valid JobQueryParam param) {
        param.setTypeId(2L);  // 校园招聘
        return ApiResponse.success(jobService.getJobList(param));
    }

    @GetMapping("/{id}")
    public ApiResponse<JobVO> getJobDetail(@PathVariable Long id) {
        return ApiResponse.success(jobService.getJobDetail(id));
    }

    @PostMapping
    public ApiResponse<Long> createJob(@RequestBody @Valid JobDTO jobDTO) {
        return ApiResponse.success(jobService.createJob(jobDTO));
    }

    @PutMapping("/{id}")
    public ApiResponse<Void> updateJob(@PathVariable Long id, @RequestBody @Valid JobDTO jobDTO) {
        jobService.updateJob(id, jobDTO);
        return ApiResponse.success(null);
    }

    @DeleteMapping("/{id}")
    public ApiResponse<Void> deleteJob(@PathVariable Long id) {
        jobService.deleteJob(id);
        return ApiResponse.success(null);
    }
}
```

###### 3. ProductController.java	

```java
package com.taotu.news.controller;

import com.taotu.news.common.result.ApiResponse;
import com.taotu.news.common.result.PageResult;
import com.taotu.news.model.dto.ProductDTO;
import com.taotu.news.model.entity.ProductCategory;
import com.taotu.news.model.param.ProductQueryParam;
import com.taotu.news.model.vo.ProductVO;
import com.taotu.news.service.ProductService;
import jakarta.validation.Valid;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@Slf4j
@RestController
@RequestMapping("/products")
@Validated
public class ProductController {
    @Autowired
    private ProductService productService;
    
    @GetMapping("/categories")
    public ApiResponse<List<ProductCategory>> getCategories() {
        return ApiResponse.success(productService.getCategoryTree());
    }

    @GetMapping("/list")
    public ApiResponse<PageResult<ProductVO>> getProductList(@Valid ProductQueryParam param) {
        return ApiResponse.success(productService.getProductList(param));
    }
    
    @GetMapping("/category/{categoryId}")
    public ApiResponse<PageResult<ProductVO>> getProductsByCategory(
            @PathVariable Long categoryId,
            @Valid ProductQueryParam param) {
        param.setCategoryId(categoryId);
        return ApiResponse.success(productService.getProductList(param));
    }

    @GetMapping("/{id}")
    public ApiResponse<ProductVO> getProductDetail(@PathVariable Long id) {
        return ApiResponse.success(productService.getProductDetail(id));
    }

    @PostMapping("/categories")
    public ApiResponse<Long> createCategory(@RequestBody @Valid ProductCategory category) {
        return ApiResponse.success(productService.createCategory(category));
    }
    
    @PostMapping
    public ApiResponse<Long> createProduct(@RequestBody @Valid ProductDTO productDTO) {
        return ApiResponse.success(productService.createProduct(productDTO));
    }

    @PutMapping("/{id}")
    public ApiResponse<Void> updateProduct(@PathVariable Long id, @RequestBody @Valid ProductDTO productDTO) {
        productService.updateProduct(id, productDTO);
        return ApiResponse.success(null);
    }

    @DeleteMapping("/{id}")
    public ApiResponse<Void> deleteProduct(@PathVariable Long id) {
        productService.deleteProduct(id);
        return ApiResponse.success(null);
    }
}
```

### 4.5 Service（服务层）

##### /

###### 1.NewsService.java

```java
// service/NewsService.java
package com.taotu.news.service;

import com.taotu.news.common.result.PageResult;
import com.taotu.news.model.param.NewsQueryParam;
import com.taotu.news.model.vo.NewsVO;

import java.util.List;

public interface NewsService {
    PageResult<NewsVO> getNewsList(NewsQueryParam param);
    List<String> getCategories();
    NewsVO getNewsDetail(Long id);
    
     // 创建新闻
    Long createNews(NewsDTO newsDTO);
    
    // 更新新闻
    void updateNews(Long id, NewsDTO newsDTO);
    
    // 删除新闻
    void deleteNews(Long id);
}
```

###### 2. JobService.java

```
package com.taotu.news.service;

import com.taotu.news.common.result.PageResult;
import com.taotu.news.model.dto.JobDTO;
import com.taotu.news.model.entity.JobType;
import com.taotu.news.model.param.JobQueryParam;
import com.taotu.news.model.vo.JobVO;
import java.util.List;

public interface JobService {
    // 获取职位类型列表
    List<JobType> getJobTypes();
    
    // 分页查询职位列表
    PageResult<JobVO> getJobList(JobQueryParam param);
    
    // 获取职位详情
    JobVO getJobDetail(Long id);
    
    // 创建职位
    Long createJob(JobDTO jobDTO);
    
    // 更新职位
    void updateJob(Long id, JobDTO jobDTO);
    
    // 删除职位
    void deleteJob(Long id);
}
```

###### 3. ProductService.java

```
package com.taotu.news.service;

import com.taotu.news.common.result.PageResult;
import com.taotu.news.model.dto.ProductDTO;
import com.taotu.news.model.entity.ProductCategory;
import com.taotu.news.model.param.ProductQueryParam;
import com.taotu.news.model.vo.ProductVO;
import java.util.List;

public interface ProductService {
    // 获取分类树
    List<ProductCategory> getCategoryTree();
    
    // 创建分类
    Long createCategory(ProductCategory category);
    
    // 分页查询产品列表
    PageResult<ProductVO> getProductList(ProductQueryParam param);
    
    // 获取产品详情
    ProductVO getProductDetail(Long id);
    
    // 创建产品
    Long createProduct(ProductDTO productDTO);
    
    // 更新产品
    void updateProduct(Long id, ProductDTO productDTO);
    
    // 删除产品
    void deleteProduct(Long id);
}
```

##### /impl

###### 1. NewsServiceImpl.java

```java
// service/impl/NewsServiceImpl.java
package com.taotu.news.service.impl;

import cn.hutool.core.bean.BeanUtil;
import cn.hutool.core.util.StrUtil;
import com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
import com.baomidou.mybatisplus.core.toolkit.Wrappers;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.taotu.news.common.exception.BusinessException;
import com.taotu.news.common.result.PageResult;
import com.taotu.news.common.result.ResultCode;
import com.taotu.news.mapper.NewsMapper;
import com.taotu.news.model.entity.News;
import com.taotu.news.model.dto.NewsDTO;
import com.taotu.news.model.param.NewsQueryParam;
import com.taotu.news.model.vo.NewsVO;
import com.taotu.news.service.NewsService;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;

/**
 * 新闻服务实现类
 * 处理新闻的增删改查等业务逻辑
 *
 * @author taotu
 * @version 1.0
 * @date 2024/03/15
 */
@Slf4j
@Service
@Transactional(rollbackFor = Exception.class)  // 开启事务管理，任何异常都会回滚
public class NewsServiceImpl implements NewsService {
    
    /**
     * 新闻数据访问接口
     */
    @Autowired
    private NewsMapper newsMapper;

    /**
     * 分页查询新闻列表
     * 支持按分类、关键词、日期范围进行筛选
     *
     * @param param 查询参数对象，包含分页信息和筛选条件
     * @return 分页结果，包含新闻列表和分页信息
     */
    @Override
    public PageResult<NewsVO> getNewsList(NewsQueryParam param) {
        // 构建分页对象
        Page<News> page = new Page<>(param.getPage(), param.getPageSize());
        
        // 构建查询条件
        LambdaQueryWrapper<News> wrapper = Wrappers.lambdaQuery(News.class)
            // 如果分类不为空，则按分类筛选
            .eq(StrUtil.isNotBlank(param.getCategory()), 
                News::getCategory, param.getCategory())
            // 如果关键词不为空，则按标题模糊查询
            .like(StrUtil.isNotBlank(param.getKeyword()), 
                 News::getTitle, param.getKeyword())
            // 如果开始日期不为空，则筛选大于等于该日期的新闻
            .ge(param.getStartDate() != null, 
                News::getPublishDate, param.getStartDate())
            // 如果结束日期不为空，则筛选小于等于该日期的新闻
            .le(param.getEndDate() != null, 
                News::getPublishDate, param.getEndDate())
            // 按发布日期降序排序
            .orderByDesc(News::getPublishDate);

        // 执行分页查询
        Page<News> newsPage = newsMapper.selectPage(page, wrapper);
        
        // 将实体对象转换为视图对象
        Page<NewsVO> voPage = new Page<>();
        BeanUtil.copyProperties(newsPage, voPage, "records");
        voPage.setRecords(BeanUtil.copyToList(newsPage.getRecords(), NewsVO.class));
        
        return PageResult.build(voPage);
    }

    /**
     * 获取所有新闻分类
     *
     * @return 分类列表
     */
    @Override
    public List<String> getCategories() {
        return newsMapper.selectCategories();
    }

    /**
     * 根据ID获取新闻详情
     *
     * @param id 新闻ID
     * @return 新闻详情视图对象
     * @throws BusinessException 当新闻不存在时抛出异常
     */
    @Override
    public NewsVO getNewsDetail(Long id) {
        News news = newsMapper.selectById(id);
        if (news == null) {
            throw new BusinessException(ResultCode.NOT_FOUND);
        }
        return BeanUtil.copyProperties(news, NewsVO.class);
    }

    /**
     * 创建新闻
     *
     * @param newsDTO 新闻数据传输对象
     * @return 新创建的新闻ID
     */
    @Override
    public Long createNews(NewsDTO newsDTO) {
        News news = BeanUtil.copyProperties(newsDTO, News.class);
        newsMapper.insert(news);
        return news.getId();
    }

    /**
     * 更新新闻信息
     *
     * @param id 新闻ID
     * @param newsDTO 新闻更新数据
     * @throws BusinessException 当新闻不存在时抛出异常
     */
    @Override
    public void updateNews(Long id, NewsDTO newsDTO) {
        // 检查新闻是否存在
        News existingNews = newsMapper.selectById(id);
        if (existingNews == null) {
            throw new BusinessException(ResultCode.NOT_FOUND, "新闻不存在");
        }

        News news = BeanUtil.copyProperties(newsDTO, News.class);
        news.setId(id);
        newsMapper.updateById(news);
    }

    /**
     * 删除新闻
     *
     * @param id 新闻ID
     * @throws BusinessException 当新闻不存在时抛出异常
     */
    @Override
    public void deleteNews(Long id) {
        // 检查新闻是否存在
        News existingNews = newsMapper.selectById(id);
        if (existingNews == null) {
            throw new BusinessException(ResultCode.NOT_FOUND, "新闻不存在");
        }

        newsMapper.deleteById(id);
    }
}
```

###### 2. JobServiceImpl.java	

```
package com.taotu.news.service.impl;

import com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.taotu.news.common.exception.BusinessException;
import com.taotu.news.common.result.PageResult;
import com.taotu.news.mapper.JobMapper;
import com.taotu.news.mapper.JobTypeMapper;
import com.taotu.news.model.dto.JobDTO;
import com.taotu.news.model.entity.Job;
import com.taotu.news.model.entity.JobType;
import com.taotu.news.model.param.JobQueryParam;
import com.taotu.news.model.vo.JobVO;
import com.taotu.news.service.JobService;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.BeanUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import cn.hutool.core.util.StrUtil;

import java.util.List;
import java.util.stream.Collectors;

@Slf4j
@Service
@Transactional(rollbackFor = Exception.class)
public class JobServiceImpl implements JobService {
    @Autowired
    private JobMapper jobMapper;
    
    @Autowired
    private JobTypeMapper jobTypeMapper;

    @Override
    public List<JobType> getJobTypes() {
        return jobTypeMapper.selectList(null);
    }

    @Override
    public PageResult<JobVO> getJobList(JobQueryParam param) {
        Page<Job> page = new Page<>(param.getPage(), param.getPageSize());
        
        LambdaQueryWrapper<Job> wrapper = new LambdaQueryWrapper<Job>()
            .eq(param.getTypeId() != null, Job::getTypeId, param.getTypeId())
            .like(StrUtil.isNotBlank(param.getKeyword()), Job::getTitle, param.getKeyword())
            .eq(Job::getStatus, 1)
            .orderByDesc(Job::getCreateTime);
            
        Page<Job> jobPage = jobMapper.selectPage(page, wrapper);
        
        List<JobVO> voList = jobPage.getRecords().stream()
            .map(this::convertToVO)
            .collect(Collectors.toList());
            
        Page<JobVO> voPage = new Page<>();
        BeanUtils.copyProperties(jobPage, voPage, "records");
        voPage.setRecords(voList);
        
        return PageResult.build(voPage);
    }

    @Override
    public JobVO getJobDetail(Long id) {
        Job job = jobMapper.selectJobWithType(id);
        if (job == null) {
            throw new BusinessException("职位不存在");
        }
        return convertToVO(job);
    }

    @Override
    public Long createJob(JobDTO jobDTO) {
        Job job = new Job();
        BeanUtils.copyProperties(jobDTO, job);
        jobMapper.insert(job);
        return job.getId();
    }

    @Override
    public void updateJob(Long id, JobDTO jobDTO) {
        Job job = jobMapper.selectById(id);
        if (job == null) {
            throw new BusinessException("职位不存在");
        }
        BeanUtils.copyProperties(jobDTO, job);
        jobMapper.updateById(job);
    }

    @Override
    public void deleteJob(Long id) {
        jobMapper.deleteById(id);
    }
    
    private JobVO convertToVO(Job job) {
        JobVO vo = new JobVO();
        BeanUtils.copyProperties(job, vo);
        return vo;
    }
}
```

###### 3. ProductServiceImpl.java

```
package com.taotu.news.service.impl;

import com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.taotu.news.common.exception.BusinessException;
import com.taotu.news.common.result.PageResult;
import com.taotu.news.mapper.ProductMapper;
import com.taotu.news.mapper.ProductCategoryMapper;
import com.taotu.news.model.dto.ProductDTO;
import com.taotu.news.model.entity.Product;
import com.taotu.news.model.entity.ProductCategory;
import com.taotu.news.model.param.ProductQueryParam;
import com.taotu.news.model.vo.ProductVO;
import com.taotu.news.service.ProductService;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.BeanUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import cn.hutool.core.util.StrUtil;

import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

@Slf4j
@Service
@Transactional(rollbackFor = Exception.class)
public class ProductServiceImpl implements ProductService {
    @Autowired
    private ProductMapper productMapper;
    
    @Autowired
    private ProductCategoryMapper categoryMapper;

    @Override
    public List<ProductCategory> getCategoryTree() {
        // 获取所有分类
        List<ProductCategory> allCategories = categoryMapper.selectList(
            new LambdaQueryWrapper<ProductCategory>()
                .orderByAsc(ProductCategory::getSortOrder)
        );
        
        // 构建分类树
        Map<Long, List<ProductCategory>> childrenMap = allCategories.stream()
            .filter(category -> category.getParentId() != 0)
            .collect(Collectors.groupingBy(ProductCategory::getParentId));
            
        allCategories.forEach(category -> 
            category.setChildren(childrenMap.getOrDefault(category.getId(), List.of()))
        );
        
        return allCategories.stream()
            .filter(category -> category.getParentId() == 0)
            .collect(Collectors.toList());
    }

    @Override
    public Long createCategory(ProductCategory category) {
        categoryMapper.insert(category);
        return category.getId();
    }

    @Override
    public PageResult<ProductVO> getProductList(ProductQueryParam param) {
        Page<Product> page = new Page<>(param.getPage(), param.getPageSize());
        
        LambdaQueryWrapper<Product> wrapper = new LambdaQueryWrapper<Product>()
            .eq(param.getCategoryId() != null, Product::getCategoryId, param.getCategoryId())
            .like(StrUtil.isNotBlank(param.getKeyword()), Product::getName, param.getKeyword())
            .eq(Product::getStatus, 1)
            .orderByAsc(Product::getSortOrder);
            
        Page<Product> productPage = productMapper.selectPage(page, wrapper);
        
        List<ProductVO> voList = productPage.getRecords().stream()
            .map(this::convertToVO)
            .collect(Collectors.toList());
            
        Page<ProductVO> voPage = new Page<>();
        BeanUtils.copyProperties(productPage, voPage, "records");
        voPage.setRecords(voList);
        
        return PageResult.build(voPage);
    }

    @Override
    public ProductVO getProductDetail(Long id) {
        Product product = productMapper.selectProductWithCategory(id);
        if (product == null) {
            throw new BusinessException("产品不存在");
        }
        return convertToVO(product);
    }

    @Override
    public Long createProduct(ProductDTO productDTO) {
        Product product = new Product();
        BeanUtils.copyProperties(productDTO, product);
        productMapper.insert(product);
        return product.getId();
    }

    @Override
    public void updateProduct(Long id, ProductDTO productDTO) {
        Product product = productMapper.selectById(id);
        if (product == null) {
            throw new BusinessException("产品不存在");
        }
        BeanUtils.copyProperties(productDTO, product);
        productMapper.updateById(product);
    }

    @Override
    public void deleteProduct(Long id) {
        productMapper.deleteById(id);
    }
    
    private ProductVO convertToVO(Product product) {
        ProductVO vo = new ProductVO();
        BeanUtils.copyProperties(product, vo);
        return vo;
    }
}
```

### 4.6  Mapper（数据访问层）

###### 1.NewsMapper.java

```java
// mapper/NewsMapper.java
package com.taotu.news.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.taotu.news.model.entity.News;
import org.apache.ibatis.annotations.Select;

import java.util.List;

public interface NewsMapper extends BaseMapper<News> {
    @Select("SELECT DISTINCT category FROM t_news WHERE is_deleted = 0")
    List<String> selectCategories();
}
```

###### 2. JobMapper.java

```java
package com.taotu.news.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.taotu.news.model.entity.Job;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Select;

@Mapper
public interface JobMapper extends BaseMapper<Job> {
    @Select("SELECT j.*, t.name as type_name FROM t_job j " +
            "LEFT JOIN t_job_type t ON j.type_id = t.id " +
            "WHERE j.id = #{id} AND j.is_deleted = 0")
    Job selectJobWithType(Long id);
}
```

###### 3. JobTypeMapper.java

```java
package com.taotu.news.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.taotu.news.model.entity.JobType;
import org.apache.ibatis.annotations.Mapper;

@Mapper
public interface JobTypeMapper extends BaseMapper<JobType> {
}
```

###### 4. ProductMapper.java

```java
package com.taotu.news.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.taotu.news.model.entity.Product;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Select;

@Mapper
public interface ProductMapper extends BaseMapper<Product> {
    @Select("SELECT p.*, c.name as category_name FROM t_product p " +
            "LEFT JOIN t_product_category c ON p.category_id = c.id " +
            "WHERE p.id = #{id} AND p.is_deleted = 0")
    Product selectProductWithCategory(Long id);
}
```

###### 5. ProductCategoryMapper.java

```java
package com.taotu.news.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.taotu.news.model.entity.ProductCategory;
import org.apache.ibatis.annotations.Mapper;

@Mapper
public interface ProductCategoryMapper extends BaseMapper<ProductCategory> {
}
```

## 4	. 运行项目

### 1.创建数据库和表

````
### 1.创建数据库和表

```
CREATE DATABASE taotu DEFAULT CHARACTER SET utf8mb4;
USE taotu;

CREATE TABLE t_news (
    id BIGINT NOT NULL AUTO_INCREMENT COMMENT '新闻ID',
    title VARCHAR(100) NOT NULL COMMENT '新闻标题',
    category VARCHAR(50) NOT NULL COMMENT '新闻分类',
    summary TEXT COMMENT '新闻摘要',
    content TEXT COMMENT '新闻内容',
    image_url VARCHAR(255) COMMENT '新闻图片URL',
    publish_date DATE NOT NULL COMMENT '发布日期',
    create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT(1) NOT NULL DEFAULT 0,
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='新闻表';

-- 职位类型表
CREATE TABLE t_job_type (
    id BIGINT NOT NULL AUTO_INCREMENT COMMENT '类型ID',
    name VARCHAR(50) NOT NULL COMMENT '类型名称(社会招聘/校园招聘)',
    create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT(1) NOT NULL DEFAULT 0,
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='职位类型表';

-- 招聘职位表
CREATE TABLE t_job (
    id BIGINT NOT NULL AUTO_INCREMENT COMMENT '职位ID',
    type_id BIGINT NOT NULL COMMENT '类型ID',
    title VARCHAR(100) NOT NULL COMMENT '职位名称',
    department VARCHAR(50) NOT NULL COMMENT '所属部门',
    location VARCHAR(100) NOT NULL COMMENT '工作地点',
    salary_range VARCHAR(50) COMMENT '薪资范围',
    experience VARCHAR(50) COMMENT '经验要求',
    education VARCHAR(50) COMMENT '学历要求',
    description TEXT NOT NULL COMMENT '职位描述',
    requirements TEXT NOT NULL COMMENT '任职要求',
    benefits TEXT COMMENT '职位福利',
    status TINYINT NOT NULL DEFAULT 1 COMMENT '状态(0:关闭 1:开放)',
    create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT(1) NOT NULL DEFAULT 0,
    PRIMARY KEY (id),
    KEY idx_type_id (type_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='招聘职位表';

-- 产品分类表
CREATE TABLE t_product_category (
    id BIGINT NOT NULL AUTO_INCREMENT COMMENT '分类ID',
    name VARCHAR(50) NOT NULL COMMENT '分类名称',
    parent_id BIGINT DEFAULT 0 COMMENT '父分类ID',
    level INT NOT NULL COMMENT '层级',
    sort_order INT DEFAULT 0 COMMENT '排序号',
    create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT(1) NOT NULL DEFAULT 0,
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='产品分类表';

-- 产品表
CREATE TABLE t_product (
    id BIGINT NOT NULL AUTO_INCREMENT COMMENT '产品ID',
    category_id BIGINT NOT NULL COMMENT '分类ID',
    name VARCHAR(100) NOT NULL COMMENT '产品名称',
    model VARCHAR(100) COMMENT '产品型号',
    description TEXT COMMENT '产品描述',
    features TEXT COMMENT '产品特点',
    specifications TEXT COMMENT '产品规格',
    parameters JSON COMMENT '技术参数',
    image_urls JSON COMMENT '产品图片URL列表',
    video_url VARCHAR(255) COMMENT '产品视频URL',
    sort_order INT DEFAULT 0 COMMENT '排序号',
    status TINYINT NOT NULL DEFAULT 1 COMMENT '状态(0:下架 1:上架)',
    create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT(1) NOT NULL DEFAULT 0,
    PRIMARY KEY (id),
    KEY idx_category_id (category_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='产品表';

-- 初始化数据
INSERT INTO t_job_type (name) VALUES 
('社会招聘'),
('校园招聘');

-- 初始化职位数据
INSERT INTO t_job (type_id, title, department, location, salary_range, experience, education, description, requirements, benefits, status) VALUES
(1, '软件工程师', '技术部', '北京', '10k-15k', '1-3年', '本科', '负责软件开发与维护', '熟悉Java，具备良好的沟通能力', '五险一金，带薪年假', 1),
(1, '产品经理', '产品部', '上海', '15k-20k', '3-5年', '本科', '负责产品规划与设计', '具备良好的市场分析能力', '弹性工作制，年度体检', 1),
(2, '实习生', '人事部', '广州', '3k-5k', '应届生', '大专', '协助人事工作', '学习能力强，积极主动', '提供实习证明，转正机会', 1);

-- 初始化产品分类
INSERT INTO t_product_category (name, parent_id, level, sort_order) VALUES 
('整车', 0, 1, 1),
('动力电池', 0, 1, 2),
('发动机', 0, 1, 3),
('零配件', 0, 1, 4);

-- 添加二级分类
INSERT INTO t_product_category (name, parent_id, level, sort_order) VALUES 
('轿车', 1, 2, 1),
('SUV', 1, 2, 2),
('MPV', 1, 2, 3);

-- 初始化产品数据
INSERT INTO t_product (category_id, name, model, description, features, specifications, parameters, image_urls, video_url, sort_order, status) VALUES
(1, '轿车A', 'Model A', '一款高性能轿车', '高效能，舒适性', '长4.8米，宽1.8米', '{"颜色": "红色", "排量": "2.0L"}', '["url1", "url2"]', 'video_url1', 1, 1),
(2, '动力电池B', 'Battery B', '高效能动力电池', '长寿命，快速充电', '容量100kWh', '{"电压": "400V"}', '["url3", "url4"]', 'video_url2', 2, 1),
(3, '发动机C', 'Engine C', '高效能发动机', '动力强劲，油耗低', '功率150马力', '{"类型": "汽油"}', '["url5", "url6"]', 'video_url3', 3, 1);
````

### 2.运行 NewsApplication

### 3.访问接口测试：http://localhost:8080/api/news/list